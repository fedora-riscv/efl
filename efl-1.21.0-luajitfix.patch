diff -up efl-1.21.0/src/lib/edje/edje_private.h.luajitfix efl-1.21.0/src/lib/edje/edje_private.h
--- efl-1.21.0/src/lib/edje/edje_private.h.luajitfix	2018-08-18 14:53:50.946311297 -0400
+++ efl-1.21.0/src/lib/edje/edje_private.h	2018-08-18 14:55:48.918580278 -0400
@@ -33,6 +33,9 @@
 #include <lua.h>
 #include <lualib.h>
 #include <lauxlib.h>
+#ifndef luaL_reg
+# define luaL_reg	luaL_Reg
+#endif
 #include <setjmp.h>
 
 #ifdef _WIN32
diff -up efl-1.21.0/src/lib/elua/elua_private.h.luajitfix efl-1.21.0/src/lib/elua/elua_private.h
--- efl-1.21.0/src/lib/elua/elua_private.h.luajitfix	2018-07-27 06:22:36.000000000 -0400
+++ efl-1.21.0/src/lib/elua/elua_private.h	2018-08-18 14:53:50.946311297 -0400
@@ -27,6 +27,9 @@
 #include <lua.h>
 #include <lualib.h>
 #include <lauxlib.h>
+#ifndef luaL_reg
+# define luaL_reg	luaL_Reg
+#endif
 
 #include "Elua.h"
 
diff -up efl-1.21.0/src/lib/evas/filters/evas_filter_parser.c.luajitfix efl-1.21.0/src/lib/evas/filters/evas_filter_parser.c
--- efl-1.21.0/src/lib/evas/filters/evas_filter_parser.c.luajitfix	2018-05-17 16:34:58.000000000 -0400
+++ efl-1.21.0/src/lib/evas/filters/evas_filter_parser.c	2018-08-18 14:53:50.946311297 -0400
@@ -13,6 +13,9 @@
 #include <lua.h>
 #include <lualib.h>
 #include <lauxlib.h>
+#ifndef luaL_reg
+# define luaL_reg	luaL_Reg
+#endif
 
 #define FILTERS_LEGACY_COMPAT
 
